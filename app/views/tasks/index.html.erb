<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">タスク一覧</h1>
    <%= link_to "新規タスク作成", new_task_path, class: "btn btn-primary" %>
  </div>

  <% if @tasks.any? %>
    <div class="row">
      <% @tasks.each do |task| %>
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="card h-100">
            <div class="card-header d-flex justify-content-between align-items-center">
              <span class="badge bg-<%= task.status == 'completed' ? 'success' : task.status == 'in_progress' ? 'warning' : 'secondary' %>">
                <%= case task.status
                    when 'pending'
                      '未着手'
                    when 'in_progress'
                      '進行中'
                    when 'completed'
                      '完了'
                    end %>
              </span>
              <small class="text-muted"><%= task.created_at.strftime("%Y/%m/%d") %></small>
            </div>
            <div class="card-body">
              <h5 class="card-title"><%= task.title %></h5>
              <p class="card-text text-muted">
                <%= task.description.present? ? truncate(task.description, length: 100) : "説明なし" %>
              </p>
            </div>
            <div class="card-footer bg-transparent">
              <div class="d-flex justify-content-between">
                <%= link_to "詳細", task_path(task), class: "btn btn-sm btn-outline-primary" %>
                <%= link_to "編集", edit_task_path(task), class: "btn btn-sm btn-outline-secondary" %>
                <%= link_to "削除", task_path(task), method: :delete, 
                    data: { confirm: "本当に削除しますか？" }, 
                    class: "btn btn-sm btn-outline-danger" %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="alert alert-info text-center">
      <p class="mb-3">まだタスクがありません。</p>
      <%= link_to "最初のタスクを作成する", new_task_path, class: "btn btn-primary" %>
    </div>
  <% end %>
  <%= link_to "ログアウト", logout_path, data: {turbo_method: :delete }, class: "btn btn-secondary" %>
</div>
